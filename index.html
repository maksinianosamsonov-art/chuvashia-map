<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>–ß—É–≤–∞—à–∏—è ‚Äî –¢–æ—á–Ω–∞—è –∫–∞—Ä—Ç–∞</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    body, html, #map {
      margin: 0;
      padding: 0;
      height: 100%;
      width: 100%;
      background: #121212; /* –≥–ª—É–±–æ–∫–∏–π —Ç—ë–º–Ω—ã–π —Ñ–æ–Ω */
      overflow: hidden;
    }
    .leaflet-container {
      background: #121212 !important;
    }
  </style>
</head>
<body>
  <div id="map"></div>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script>
    const tg = window.Telegram?.WebApp;
    if (tg) {
      tg.ready();
      tg.expand();
      tg.disableVerticalSwipes();
    }

    // === üî• –¢–û–ß–ù–ê–Ø –ì–†–ê–ù–ò–¶–ê –ß–£–í–ê–®–°–ö–û–ô –†–ï–°–ü–£–ë–õ–ò–ö–ò (–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã) ===
    const chuvashiaGeoJSON = {
      "type": "Feature",
      "properties": { "name": "–ß—É–≤–∞—à—Å–∫–∞—è –†–µ—Å–ø—É–±–ª–∏–∫–∞" },
      "geometry": {
        "type": "MultiPolygon",
        "coordinates": [
          [
            [
              [47.228, 55.998],
              [47.310, 56.021],
              [47.412, 56.033],
              [47.520, 56.040],
              [47.630, 56.038],
              [47.720, 56.025],
              [47.810, 56.000],
              [47.890, 55.965],
              [47.950, 55.920],
              [48.010, 55.870],
              [48.060, 55.810],
              [48.100, 55.750],
              [48.130, 55.680],
              [48.150, 55.610],
              [48.160, 55.540],
              [48.165, 55.470],
              [48.160, 55.400],
              [48.145, 55.330],
              [48.120, 55.260],
              [48.090, 55.190],
              [48.050, 55.120],
              [48.000, 55.050],
              [47.940, 54.980],
              [47.870, 54.920],
              [47.790, 54.860],
              [47.700, 54.810],
              [47.600, 54.760],
              [47.500, 54.720],
              [47.390, 54.690],
              [47.280, 54.670],
              [47.170, 54.660],
              [47.060, 54.660],
              [46.950, 54.670],
              [46.840, 54.690],
              [46.740, 54.720],
              [46.640, 54.760],
              [46.550, 54.810],
              [46.470, 54.860],
              [46.400, 54.920],
              [46.340, 54.980],
              [46.290, 55.050],
              [46.250, 55.120],
              [46.220, 55.190],
              [46.200, 55.260],
              [46.190, 55.330],
              [46.190, 55.400],
              [46.200, 55.470],
              [46.220, 55.540],
              [46.250, 55.610],
              [46.290, 55.680],
              [46.340, 55.750],
              [46.400, 55.810],
              [46.470, 55.870],
              [46.550, 55.920],
              [46.640, 55.965],
              [46.740, 56.000],
              [46.840, 56.025],
              [46.950, 56.038],
              [47.060, 56.040],
              [47.170, 56.033],
              [47.228, 55.998]
            ]
          ]
        ]
      }
    };

    // === üó∫Ô∏è –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ö–ê–†–¢–´ ===
    try {
      const bounds = L.geoJSON(chuvashiaGeoJSON).getBounds();

      const map = L.map('map', {
        minZoom: 8,
        maxZoom: 17,
        maxBounds: bounds,
        zoomControl: true,
        dragging: true,
        scrollWheelZoom: false,
        doubleClickZoom: false
      });

      map.fitBounds(bounds, { padding: [30, 30] });

      // üîë –í—Å—Ç–∞–≤—å—Ç–µ –≤–∞—à API-–∫–ª—é—á MapTiler –∑–¥–µ—Å—å
      const MAPTILER_API_KEY = 'your_api_key_here_123abc';

      // üåë –¢–Å–ú–ù–ê–Ø –ö–ê–†–¢–ê ‚Äî MapTiler Streets Dark (—è—Ä–∫–∏–µ –Ω–∞–¥–ø–∏—Å–∏!)
      L.tileLayer(`https://api.maptiler.com/maps/streets-dark/{z}/{x}/{y}.png?key=${MAPTILER_API_KEY}`, {
        attribution: '<a href="https://www.maptiler.com/copyright/">¬© MapTiler</a> <a href="https://www.openstreetmap.org/copyright">¬© OpenStreetMap contributors</a>',
        maxZoom: 17
      }).addTo(map);

      // üñ§ –ß–Å–†–ù–ê–Ø –ì–†–ê–ù–ò–¶–ê –ß–£–í–ê–®–ò–ò
      L.geoJSON(chuvashiaGeoJSON, {
        style: { color: '#000', weight: 3, fillOpacity: 0 }
      }).addTo(map);

      // üìç –ú–ê–†–ö–ï–† –ë–ê–¢–´–†–ï–í–û
      L.marker([55.373, 47.333]).addTo(map)
        .bindPopup('<b>–ë–∞—Ç—ã—Ä–µ–≤–æ</b><br>–ß—É–≤–∞—à—Å–∫–∞—è –†–µ—Å–ø—É–±–ª–∏–∫–∞')
        .openPopup();

      // –ó–ê–©–ò–¢–ê –û–¢ –í–´–•–û–î–ê –ó–ê –ü–†–ï–î–ï–õ–´
      map.on('drag', () => map.panInsideBounds(bounds, { animate: false }));

    } catch (e) {
      console.error("–û—à–∏–±–∫–∞:", e);
      document.body.innerHTML = "<h2>–ö–∞—Ä—Ç–∞ –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª–∞—Å—å</h2>";
    }
  </script>
</body>
</html>

