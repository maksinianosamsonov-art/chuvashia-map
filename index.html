<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>–û–∫—Å–∞–Ω–∞: –ì–æ–Ω–∫–∏, –ú–µ–º—ã –∏ –ú–∏—Å—Å–∏–∏</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    :root {
      --bg-dark: #0a0e21;
      --neon-pink: #ff00ff;
      --neon-green: #00ff88;
      --text-white: #ffffff;
      --card-bg: #14182b;
      --accent-blue: #3a506b;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      -webkit-tap-highlight-color: transparent;
    }

    body {
      background: var(--bg-dark);
      color: var(--text-white);
      overflow-x: hidden;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      position: relative;
      touch-action: manipulation;
    }

    #app {
      width: 100%;
      max-width: 500px;
      height: 100vh;
      display: flex;
      flex-direction: column;
      position: relative;
      overflow: hidden;
    }

    .neon-border {
      box-shadow: 0 0 10px var(--neon-pink), inset 0 0 10px rgba(255, 0, 255, 0.3);
      border: 2px solid var(--neon-pink);
    }

    .neon-text {
      text-shadow: 0 0 10px var(--neon-pink), 0 0 20px var(--neon-pink);
      color: var(--neon-pink);
    }

    .glow-green {
      text-shadow: 0 0 10px var(--neon-green);
      color: var(--neon-green);
    }

    #loading {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: var(--bg-dark);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 1000;
      transition: opacity 0.5s ease-out;
    }

    .spinner {
      width: 60px;
      height: 60px;
      border: 4px solid rgba(255, 0, 255, 0.3);
      border-top: 4px solid var(--neon-pink);
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin-bottom: 20px;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .loading-text {
      font-size: 24px;
      margin-top: 20px;
      animation: pulse 1.5s infinite;
    }

    @keyframes pulse {
      0% { opacity: 1; }
      50% { opacity: 0.7; }
      100% { opacity: 1; }
    }

    #main-screen {
      display: flex;
      flex-direction: column;
      height: 100%;
      padding: 15px;
      opacity: 0;
      transform: translateY(20px);
      transition: opacity 0.5s ease-out, transform 0.5s ease-out;
      position: relative;
    }

    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
      padding: 10px;
      background: rgba(20, 24, 43, 0.5);
      border-radius: 15px;
      backdrop-filter: blur(10px);
    }

    .avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: linear-gradient(45deg, var(--neon-pink), var(--neon-green));
      display: flex;
      justify-content: center;
      align-items: center;
      font-weight: bold;
      font-size: 18px;
    }

    .stats {
      display: flex;
      gap: 10px;
    }

    .stat-item {
      background: var(--card-bg);
      padding: 6px 10px;
      border-radius: 10px;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-width: 50px;
      font-size: 12px;
    }

    .stat-value {
      font-size: 14px;
      font-weight: bold;
      color: var(--neon-green);
    }

    .stat-label {
      font-size: 10px;
      opacity: 0.7;
    }

    .oksana-container {
      flex: 1;
      display: flex;
      justify-content: center;
      align-items: center;
      margin: 15px 0;
      position: relative;
    }

    .oksana-sprite {
      width: 250px;
      height: 300px;
      position: relative;
      animation: float 3s ease-in-out infinite;
    }

    .oksana-image {
      width: 100%;
      height: 100%;
      object-fit: contain;
      filter: drop-shadow(0 0 10px var(--neon-pink));
    }

    @keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-10px); }
    }

    .dialog-box {
      background: var(--card-bg);
      padding: 15px;
      border-radius: 15px;
      margin: 15px 0;
      position: relative;
      border-left: 4px solid var(--neon-pink);
      box-shadow: 0 0 15px rgba(255, 0, 255, 0.2);
    }

    .dialog-box::before {
      content: "";
      position: absolute;
      top: -10px;
      left: 20px;
      width: 0;
      height: 0;
      border-left: 10px solid transparent;
      border-right: 10px solid transparent;
      border-bottom: 10px solid var(--card-bg);
    }

    .dialog-text {
      font-size: 16px;
      line-height: 1.5;
      margin-bottom: 15px;
      text-align: center;
    }

    .memes-gallery {
      display: flex;
      gap: 8px;
      margin: 10px 0;
      overflow-x: auto;
      padding: 8px 0;
      scrollbar-width: thin;
      scrollbar-color: var(--neon-pink) var(--card-bg);
    }

    .meme-item {
      min-width: 70px;
      height: 70px;
      background: rgba(255, 0, 255, 0.1);
      border: 2px solid var(--neon-pink);
      border-radius: 10px;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 10px;
      text-align: center;
      padding: 5px;
      cursor: pointer;
      transition: all 0.2s;
    }

    .meme-item:hover {
      transform: scale(1.05);
      box-shadow: 0 0 10px var(--neon-pink);
    }

    .actions {
      display: flex;
      gap: 8px;
      margin-top: 15px;
    }

    .btn {
      flex: 1;
      padding: 12px;
      border: none;
      border-radius: 12px;
      font-weight: bold;
      font-size: 14px;
      cursor: pointer;
      transition: all 0.2s;
      text-align: center;
    }

    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 0 15px var(--neon-pink);
    }

    .btn-primary {
      background: linear-gradient(45deg, var(--neon-pink), #ff66ff);
      color: white;
    }

    .btn-secondary {
      background: var(--card-bg);
      color: var(--neon-green);
      border: 2px solid var(--neon-green);
    }

    .btn-tertiary {
      background: var(--card-bg);
      color: var(--accent-blue);
      border: 2px solid var(--accent-blue);
    }

    #puzzle-screen {
      display: none;
      flex-direction: column;
      height: 100%;
      padding: 15px;
      position: relative;
    }

    .puzzle-header {
      text-align: center;
      margin-bottom: 15px;
      padding: 10px;
      background: rgba(20, 24, 43, 0.5);
      border-radius: 15px;
    }

    .puzzle-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 5px;
      margin: 15px 0;
      flex: 1;
    }

    .puzzle-piece {
      background: var(--card-bg);
      border: 2px solid var(--neon-pink);
      border-radius: 8px;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 24px;
      cursor: pointer;
      transition: all 0.2s;
      position: relative;
      overflow: hidden;
    }

    .puzzle-piece:hover {
      transform: scale(1.05);
      box-shadow: 0 0 10px var(--neon-pink);
    }

    .puzzle-progress {
      text-align: center;
      margin: 10px 0;
      font-size: 14px;
      color: var(--neon-green);
    }

    #leaderboard-screen {
      display: none;
      flex-direction: column;
      height: 100%;
      padding: 15px;
      position: relative;
    }

    .leaderboard-header {
      text-align: center;
      margin-bottom: 15px;
      padding: 10px;
      background: rgba(20, 24, 43, 0.5);
      border-radius: 15px;
    }

    .leaderboard-list {
      flex: 1;
      overflow-y: auto;
      margin: 15px 0;
      padding: 10px;
      background: var(--card-bg);
      border-radius: 15px;
    }

    .leaderboard-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px;
      margin: 5px 0;
      background: rgba(255, 0, 255, 0.05);
      border-radius: 10px;
      border-left: 3px solid var(--neon-pink);
    }

    .rank {
      font-weight: bold;
      color: var(--neon-green);
    }

    .player-name {
      flex: 1;
      margin: 0 10px;
    }

    .score {
      font-weight: bold;
      color: var(--neon-pink);
    }

    .notification {
      position: fixed;
      top: 60px;
      left: 50%;
      transform: translateX(-50%);
      background: var(--neon-green);
      color: black;
      padding: 10px 20px;
      border-radius: 15px;
      z-index: 1000;
      opacity: 0;
      transition: opacity 0.3s;
      box-shadow: 0 0 15px var(--neon-green);
    }

    .notification.show {
      opacity: 1;
    }
  </style>
</head>
<body>
  <div id="app">
    <!-- –≠–∫—Ä–∞–Ω –∑–∞–≥—Ä—É–∑–∫–∏ -->
    <div id="loading">
      <div class="spinner"></div>
      <div class="loading-text neon-text">–ó–∞–≥—Ä—É–∑–∫–∞ –û–∫—Å–∞–Ω—ã...</div>
    </div>

    <!-- –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω -->
    <div id="main-screen">
      <div class="header">
        <div class="avatar">–û</div>
        <div class="stats">
          <div class="stat-item">
            <div class="stat-value" id="coins">100</div>
            <div class="stat-label">–ú–æ–Ω–µ—Ç—ã</div>
          </div>
          <div class="stat-item">
            <div class="stat-value" id="level">1</div>
            <div class="stat-label">–£—Ä–æ–≤–µ–Ω—å</div>
          </div>
          <div class="stat-item">
            <div class="stat-value" id="day">1</div>
            <div class="stat-label">–î–µ–Ω—å</div>
          </div>
        </div>
      </div>

      <div class="oksana-container">
        <div class="oksana-sprite">
          <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 200 250'%3E%3Crect width='200' height='250' fill='%23ff66ff' opacity='0.2'/%3E%3Ccircle cx='100' cy='80' r='40' fill='%23ff99cc'/%3E%3Ccircle cx='85' cy='70' r='5' fill='%23000'/%3E%3Ccircle cx='115' cy='70' r='5' fill='%23000'/%3E%3Cpath d='M80 110 Q100 130 120 110' stroke='%23000' stroke-width='3' fill='none'/%3E%3Crect x='50' y='150' width='100' height='80' fill='%23ff66ff'/%3E%3C/svg%3E" 
               alt="–û–∫—Å–∞–Ω–∞" class="oksana-image">
        </div>
      </div>

      <div class="dialog-box">
        <div class="dialog-text" id="dialog-text">
          –ü—Ä–∏–≤–µ—Ç! –Ø –û–∫—Å–∞–Ω–∞ –∏–∑ –ß–µ–±–æ–∫—Å–∞—Ä! üé§<br><br>
          –°–µ–≥–æ–¥–Ω—è –î–µ–Ω—å 1 –Ω–∞—à–µ–≥–æ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏—è! –ü–æ–º–æ–≥–∏ –º–Ω–µ —Å–æ–±—Ä–∞—Ç—å –ø–∞–∑–ª –∏–∑ –º–æ–µ–≥–æ —Ñ–æ—Ç–æ, 
          –∏ —è –æ—Ç–∫—Ä–æ—é —Ç–µ–±–µ –¥–æ—Å—Ç—É–ø –∫ —Å–≤–æ–∏–º –≥–æ–Ω–∫–∞–º! üèéÔ∏è
        </div>
        <div class="memes-gallery">
          <div class="meme-item meme-effect">"I'm ready"</div>
          <div class="meme-item meme-effect">"This is fine"</div>
          <div class="meme-item meme-effect">"When you see"</div>
        </div>
      </div>

      <div class="actions">
        <button class="btn btn-primary" id="start-puzzle">–°–æ–±—Ä–∞—Ç—å –ø–∞–∑–ª üß©</button>
        <button class="btn btn-secondary" id="view-leaderboard">üèÜ –õ–∏–¥–µ—Ä—ã</button>
      </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –º–∏–Ω–∏-–∏–≥—Ä—ã –ü–∞–∑–ª -->
    <div id="puzzle-screen">
      <div class="puzzle-header">
        <h2 class="neon-text">–î–µ–Ω—å 1: –°–æ–±–µ—Ä–∏ –ø–∞–∑–ª!</h2>
        <p>–†–∞—Å—Å—Ç–∞–≤—å —á–∞—Å—Ç–∏ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ</p>
      </div>
      
      <div class="puzzle-grid" id="puzzle-grid">
        <!-- –ü–∞–∑–ª –±—É–¥–µ—Ç –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –∑–¥–µ—Å—å -->
      </div>

      <div class="puzzle-progress" id="puzzle-progress">–ü—Ä–∞–≤–∏–ª—å–Ω–æ: 0/9</div>

      <div class="actions">
        <button class="btn btn-tertiary" id="back-to-main">–ù–∞–∑–∞–¥</button>
        <button class="btn btn-primary" id="check-puzzle">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å ‚úÖ</button>
      </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω —Ç–∞–±–ª–∏—Ü—ã –ª–∏–¥–µ—Ä–æ–≤ -->
    <div id="leaderboard-screen">
      <div class="leaderboard-header">
        <h2 class="neon-text">üèÜ –¢–∞–±–ª–∏—Ü–∞ –õ–∏–¥–µ—Ä–æ–≤</h2>
        <p>–õ—É—á—à–∏–µ –∏–≥—Ä–æ–∫–∏ –ß–µ–±–æ–∫—Å–∞—Ä</p>
      </div>
      
      <div class="leaderboard-list" id="leaderboard-list">
        <div class="leaderboard-item">
          <span class="rank">#1</span>
          <span class="player-name">–û–∫—Å–∞–Ω–∞ üé§</span>
          <span class="score">1000</span>
        </div>
        <div class="leaderboard-item">
          <span class="rank">#2</span>
          <span class="player-name">–¢—ã</span>
          <span class="score">100</span>
        </div>
        <div class="leaderboard-item">
          <span class="rank">#3</span>
          <span class="player-name">–î—Ä—É–≥ –û–∫—Å–∞–Ω—ã</span>
          <span class="score">50</span>
        </div>
        <div class="leaderboard-item">
          <span class="rank">#4</span>
          <span class="player-name">–ì–æ–Ω—â–∏–∫ –ß–µ–±–æ–∫—Å–∞—Ä</span>
          <span class="score">25</span>
        </div>
        <div class="leaderboard-item">
          <span class="rank">#5</span>
          <span class="player-name">–ú–µ–º–Ω—ã–π –ú–∞—Å—Ç–µ—Ä</span>
          <span class="score">10</span>
        </div>
      </div>

      <div class="actions">
        <button class="btn btn-primary" id="back-from-leaderboard">–ù–∞–∑–∞–¥</button>
      </div>
    </div>

    <!-- –°–∏—Å—Ç–µ–º–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ -->
    <div class="notification" id="notification">–ü–∞–∑–ª —Å–æ–±—Ä–∞–Ω! +50 –º–æ–Ω–µ—Ç!</div>
  </div>

  <script>
    // –ò–º–∏—Ç–∞—Ü–∏—è Telegram WebApp
    const Telegram = window.Telegram || {
      WebApp: {
        initData: null,
        initDataUnsafe: { user: { id: 123456789, first_name: "–ò–≥—Ä–æ–∫" } },
        ready: () => {},
        expand: () => {},
        MainButton: {
          setText: () => {},
          show: () => {}
        }
      }
    };

    // –ò–≥—Ä–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
    const gameState = {
      currentScreen: 'main',
      day: 1,
      coins: 100,
      level: 1,
      completedPuzzles: [],
      collectedMemes: ['im_ready', 'this_is_fine', 'when_you_see'],
      correctPieces: 0
    };

    // DOM —ç–ª–µ–º–µ–Ω—Ç—ã
    const elements = {
      loading: document.getElementById('loading'),
      mainScreen: document.getElementById('main-screen'),
      puzzleScreen: document.getElementById('puzzle-screen'),
      leaderboardScreen: document.getElementById('leaderboard-screen'),
      dialogText: document.getElementById('dialog-text'),
      coins: document.getElementById('coins'),
      level: document.getElementById('level'),
      day: document.getElementById('day'),
      startPuzzle: document.getElementById('start-puzzle'),
      viewLeaderboard: document.getElementById('view-leaderboard'),
      backToMain: document.getElementById('back-to-main'),
      checkPuzzle: document.getElementById('check-puzzle'),
      puzzleGrid: document.getElementById('puzzle-grid'),
      puzzleProgress: document.getElementById('puzzle-progress'),
      backFromLeaderboard: document.getElementById('back-from-leaderboard'),
      notification: document.getElementById('notification'),
      leaderboardList: document.getElementById('leaderboard-list')
    };

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
    function initApp() {
      Telegram.WebApp.ready();
      Telegram.WebApp.expand();
      
      // –ò–º–∏—Ç–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏
      setTimeout(() => {
        elements.loading.style.opacity = '0';
        setTimeout(() => {
          elements.loading.style.display = 'none';
          elements.mainScreen.style.opacity = '1';
          elements.mainScreen.style.transform = 'translateY(0)';
        }, 500);
      }, 2000);

      // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI
      updateUI();

      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
      elements.startPuzzle.addEventListener('click', showPuzzleScreen);
      elements.backToMain.addEventListener('click', showMainScreen);
      elements.checkPuzzle.addEventListener('click', checkPuzzle);
      elements.viewLeaderboard.addEventListener('click', showLeaderboardScreen);
      elements.backFromLeaderboard.addEventListener('click', showMainScreen);
    }

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI
    function updateUI() {
      elements.coins.textContent = gameState.coins;
      elements.level.textContent = gameState.level;
      elements.day.textContent = gameState.day;
    }

    // –ü–æ–∫–∞–∑–∞—Ç—å –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω
    function showMainScreen() {
      elements.puzzleScreen.style.display = 'none';
      elements.leaderboardScreen.style.display = 'none';
      elements.mainScreen.style.display = 'flex';
      gameState.currentScreen = 'main';
    }

    // –ü–æ–∫–∞–∑–∞—Ç—å —ç–∫—Ä–∞–Ω –ø–∞–∑–ª–∞
    function showPuzzleScreen() {
      elements.mainScreen.style.display = 'none';
      elements.puzzleScreen.style.display = 'flex';
      gameState.currentScreen = 'puzzle';
      generatePuzzle();
    }

    // –ü–æ–∫–∞–∑–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É –ª–∏–¥–µ—Ä–æ–≤
    function showLeaderboardScreen() {
      elements.mainScreen.style.display = 'none';
      elements.leaderboardScreen.style.display = 'flex';
      gameState.currentScreen = 'leaderboard';
    }

    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–∞–∑–ª–∞
    function generatePuzzle() {
      elements.puzzleGrid.innerHTML = '';
      const pieces = [1, 2, 3, 4, 5, 6, 7, 8, 9];
      const shuffled = [...pieces].sort(() => Math.random() - 0.5);
      gameState.correctPieces = 0;
      updatePuzzleProgress();
      
      shuffled.forEach((num, index) => {
        const piece = document.createElement('div');
        piece.className = 'puzzle-piece';
        piece.textContent = num;
        piece.dataset.correctPosition = num - 1;
        piece.dataset.currentPosition = index;
        piece.addEventListener('click', () => togglePieceSelection(piece));
        elements.puzzleGrid.appendChild(piece);
      });
    }

    // –°–æ—Å—Ç–æ—è–Ω–∏–µ –≤—ã–±–æ—Ä–∞ –ø–∞–∑–ª–æ–≤
    let selectedPiece = null;

    // –í—ã–±–æ—Ä/–æ—Ç–º–µ–Ω–∞ –≤—ã–±–æ—Ä–∞ –ø–∞–∑–ª–∞
    function togglePieceSelection(piece) {
      if (selectedPiece === piece) {
        // –û—Ç–º–µ–Ω–∞ –≤—ã–±–æ—Ä–∞
        piece.classList.remove('selected');
        selectedPiece = null;
        return;
      }
      
      if (selectedPiece) {
        // –û–±–º–µ–Ω –ø–∞–∑–ª–∞–º–∏
        swapPieces(selectedPiece, piece);
        selectedPiece.classList.remove('selected');
        selectedPiece = null;
      } else {
        // –í—ã–±–æ—Ä –ø–µ—Ä–≤–æ–≥–æ –ø–∞–∑–ª–∞
        piece.classList.add('selected');
        selectedPiece = piece;
      }
    }

    // –û–±–º–µ–Ω –ø–∞–∑–ª–∞–º–∏
    function swapPieces(piece1, piece2) {
      const tempPos = piece1.dataset.currentPosition;
      piece1.dataset.currentPosition = piece2.dataset.currentPosition;
      piece2.dataset.currentPosition = tempPos;

      // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ DOM
      const parent = elements.puzzleGrid;
      const piece1Index = Array.from(parent.children).indexOf(piece1);
      const piece2Index = Array.from(parent.children).indexOf(piece2);
      
      parent.insertBefore(piece2, piece1);
      if (piece1Index < piece2Index) {
        parent.insertBefore(piece1, parent.children[piece2Index]);
      } else {
        parent.insertBefore(piece1, parent.children[piece2Index + 1]);
      }

      // –ü–µ—Ä–µ–ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ (–Ω–∞ —Å–ª—É—á–∞–π —É–¥–∞–ª–µ–Ω–∏—è –∏–∑ DOM)
      piece1.removeEventListener('click', () => togglePieceSelection(piece1));
      piece2.removeEventListener('click', () => togglePieceSelection(piece2));
      piece1.addEventListener('click', () => togglePieceSelection(piece1));
      piece2.addEventListener('click', () => togglePieceSelection(piece2));

      // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ –ø–æ–∑–∏—Ü–∏–π
      updateCorrectPieces();
    }

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –ø–∞–∑–ª–æ–≤
    function updateCorrectPieces() {
      const pieces = document.querySelectorAll('.puzzle-piece');
      let correctCount = 0;
      
      pieces.forEach((piece, index) => {
        if (parseInt(piece.dataset.correctPosition) === index) {
          piece.classList.add('correct');
          correctCount++;
        } else {
          piece.classList.remove('correct');
        }
      });
      
      gameState.correctPieces = correctCount;
      updatePuzzleProgress();
    }

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –ø–∞–∑–ª–∞
    function updatePuzzleProgress() {
      elements.puzzleProgress.textContent = `–ü—Ä–∞–≤–∏–ª—å–Ω–æ: ${gameState.correctPieces}/9`;
    }

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞–∑–ª–∞
    function checkPuzzle() {
      if (gameState.correctPieces === 9) {
        // –ü–∞–∑–ª —Ä–µ—à–µ–Ω
        gameState.coins += 50;
        gameState.completedPuzzles.push(gameState.day);
        updateUI();
        
        showNotification('üéâ –£–†–ê! –ü–ê–ó–õ –°–û–ë–†–ê–ù! üéâ<br>+50 –º–æ–Ω–µ—Ç!');
        setTimeout(() => {
          showMainScreen();
          elements.dialogText.innerHTML = '–û—Ç–ª–∏—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞! üéâ<br><br>–¢—ã —Å–æ–±—Ä–∞–ª –ø–∞–∑–ª –∏ –ø–æ–ª—É—á–∏–ª 50 –º–æ–Ω–µ—Ç!<br>–¢–µ–ø–µ—Ä—å —É —Ç–µ–±—è –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø –∫ –º–æ–∏–º –≥–æ–Ω–∫–∞–º! üèéÔ∏è<br><br>–ó–∞–≤—Ç—Ä–∞ –±—É–¥–µ—Ç –Ω–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ!';
        }, 2000);
      } else {
        showNotification('–ï—â–µ –Ω–µ –≤—Å–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ! –ü–æ–ø—Ä–æ–±—É–π –µ—â–µ —Ä–∞–∑!', 'warning');
      }
    }

    // –ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
    function showNotification(message, type = 'success') {
      elements.notification.innerHTML = message;
      elements.notification.className = 'notification show';
      if (type === 'warning') {
        elements.notification.style.background = '#ffaa00';
        elements.notification.style.color = 'black';
        elements.notification.style.boxShadow = '0 0 15px #ffaa00';
      } else {
        elements.notification.style.background = var(--neon-green);
        elements.notification.style.color = 'black';
        elements.notification.style.boxShadow = '0 0 15px var(--neon-green)';
      }
      
      setTimeout(() => {
        elements.notification.classList.remove('show');
      }, 3000);
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    document.addEventListener('DOMContentLoaded', initApp);
  </script>
</body>
</html>

